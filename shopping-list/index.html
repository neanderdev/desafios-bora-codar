<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <title>Lista de Compras</title>
</head>
<body>
    <div class="select">
        <div id="category-select">
            <label for="options-view-button">Categoria</label>

            <input type="checkbox" id="options-view-button" />

            <div id="select-button">
                <div id="select-value">Selecione a categoria</div>

                <div id="chevrons">
                    <i data-lucide="chevron-down"></i>

                    <i data-lucide="chevron-up"></i>
                </div>
            </div>
        </div>

        <ul id="options">
            <li class="option">
                <input 
                    type="radio"
                    name="category"
                    value="bakery"
                    data-label="Padaria"
                />

                <i data-lucide="sandwich"></i>

                <span class="label">Padaria</span>

                <i data-lucide="check"></i>
            </li>

            <li class="option">
                <input 
                    type="radio"
                    name="category"
                    value="vegetable"
                    data-label="Legume"
                />

                <i data-lucide="carrot"></i>

                <span class="label">Legume</span>

                <i data-lucide="check"></i>
            </li>

            <li class="option">
                <input 
                    type="radio"
                    name="category"
                    value="meat"
                    data-label="Carne"
                />

                <i data-lucide="beef"></i>

                <span class="label">Carne</span>

                <i data-lucide="check"></i>
            </li>

            <li class="option">
                <input 
                    type="radio"
                    name="category"
                    value="fruit"
                    data-label="Fruta"
                />

                <i data-lucide="apple"></i>

                <span class="label">Fruta</span>

                <i data-lucide="check"></i>
            </li>

            <li class="option">
                <input 
                    type="radio"
                    name="category"
                    value="drink"
                    data-label="Bebida"
                />

                <i data-lucide="milk"></i>

                <span class="label">Bebida</span>

                <i data-lucide="check"></i>
            </li>
        </ul>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        lucide.createIcons();

        let select = document.querySelector('.select'),
            selectValue = document.getElementById('select-value'),
            optionsViewButton = document.getElementById('options-view-button'),
            inputsOptions = document.querySelectorAll('.option input');

            inputsOptions.forEach(input => {
                input.addEventListener('click', event => {
                    selectValue.textContent = input.dataset.label;

                    const isMouseOrTouch = event.pointerType == "mouse" || event.pointerType == "touch";

                    isMouseOrTouch && optionsViewButton.click();
                })
            })

            window.addEventListener('keydown', e => {
                if (!select.classList.contains('open')) return

                if (e.key == 'Escape' || e.key == " ") {
                    optionsViewButton.click()
                }
            })

            optionsViewButton.addEventListener('input', () => {
                select.classList.toggle('open')

                if (!select.classList.contains('open')) return

                const input = document.querySelector('.option input:checked') || document.querySelector('.option input');

                input.focus();
            })
    </script>
</body>
</html>
